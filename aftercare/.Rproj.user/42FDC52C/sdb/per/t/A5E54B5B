{
    "contents" : "\n########\n# READ IN PARENTS RESPONSES FROM GOOGLE DRIVE\n########\nrequire(RCurl)\noptions(RCurlOptions = list(cainfo = system.file(\"CurlSSL\", \"cacert.pem\", package = \"RCurl\")))\nmyLink<- \"https://docs.google.com/spreadsheets/d/1DhRFBd3pcHjQNhnT6qW10P0TCx-Pb3JVLMZVFoYXCYU/export?&format=csv\"\nmyCsv <- getURL(myLink)\ndf <- read.csv(textConnection(myCsv))\n\n########\n# CHANGE COLUMN NAMES\n########\nnames(df) <- c(\"time\", \"name\", \"grade\", \"mon\", \"tue\" ,\"wed\", \"thu\", \"fri\", \"comments\")\n\n########\n# MAKE FUNCTION TO RENAME LEVELS TO MINUTES AFTER 3\n########\nMinuteFun <- function(var){\n  ifelse(df[,var] == \"\", 0,\n         ifelse(df[,var] == \"Until 3:30 (1-3 graders only)\", 30,\n                ifelse(df[,var] == \"Until 4\", 60,\n                       ifelse(df[,var] == \"Until 4:30\", 90,\n                              ifelse(df[,var] == \"Until 5\", 120, \n                                     ifelse(df[,var] == \"Not interested\", 0, \n                                            NA))))))\n}\n\n# NUMERICAL MINUTES AFTER 3:00\ndf$mon1 <- MinuteFun(\"mon\")\ndf$tue1 <- MinuteFun(\"tue\")\ndf$wed1 <- MinuteFun(\"wed\")\ndf$thu1 <- MinuteFun(\"thu\")\ndf$fri1 <- MinuteFun(\"fri\")\n\n\n# CHARGED MINUTES\n# this conditional takes away 30 minutes from 4-6 graders if they choose after care\n# mon\ndf$mon1c <- ifelse(df$grade <=3, df$mon1,\n                   ifelse(df$mon1 == 0, df$mon1,\n                          ifelse(df$grade >=4, df$mon1 - 30, NA)))\n# tue\ndf$tue1c <- ifelse(df$grade <=3, df$tue1,\n                   ifelse(df$tue1 == 0, df$tue1,\n                          ifelse(df$grade >=4, df$tue1 - 30, NA)))\n# wed\ndf$wed1c <- ifelse(df$grade <=3, df$wed1,\n                   ifelse(df$wed1 == 0, df$wed1,\n                          ifelse(df$grade >=4, df$wed1 - 30, NA)))\n# thu\ndf$thu1c <- ifelse(df$grade <=3, df$thu1,\n                   ifelse(df$thu1 == 0, df$thu1,\n                          ifelse(df$grade >=4, df$thu1 - 30, NA)))\n# fri\ndf$fri1c <- ifelse(df$grade <=3, df$fri1,\n                   ifelse(df$fri1 == 0, df$fri1,\n                          ifelse(df$grade >=4, df$fri1 - 30, NA)))\n\n\ndays <- c(\"mon\", \"tue\", \"wed\", \"thu\", \"fri\")\ndf <- df[,c(\"grade\", paste0(days,1), paste0(days,\"1c\"))]\n\nyoung <- df[which(df$grade <=3),]\nold <- df[which(df$grade >=4),]\n#########\n# FUNCTION FOR MINUTES PER DAY\n#########\nFun <- function(day, minutes){\n  \n  sum(young[,paste0(day,\"1c\")][which(young[,paste0(day,1)] <= minutes)]) +\n    sum(old[,paste0(day,\"1c\")][which(old[,paste0(day,1)] <= minutes)]) \n}\n\n########\n# MAKE TS\n########\nday <- c(\"mon\", \"tue\", \"wed\", \"thu\", \"fri\")\nts <- data.frame(day)\n\n#########\n# CREATE COLUMNS FOR TIME OPTIONS\n#########\nfor (i in c(30,60,90,120)){\n  ts[,paste0(\"x\",i)] <- NA\n}\n\n########\n# LOOP TO GET CHARGED MINUTES FOR EACH DAY / TIME\n########\nfor (i in ts$day){\n  for (j in c(30,60,90,120)){\n    ts[which(ts$day == i), paste0(\"x\", j)] <-\n      Fun(i, j)\n  }\n}\n\n\n########\n# LOOP TO GET ROI - $10 / HOUR FOR TEACHER AND $10 / HOUR FOR KID\n########\nHourfy <- function(x){x/60}\n\nfor (i in c(30,60,90,120)){\n  ts[,paste0(\"roi\",i)] <- NA\n}\n\n\n########\n#\n########\n\n\n########\n#\n########\n\n\n########\n#\n########\n\n\n########\n#\n########\n\n\n########\n#\n########\n\n\n########\n#\n########\n\n\n########\n#\n########\n\n\n########\n#\n########\n\n\n########\n#\n########\n\n\n########\n#\n########\n\n\n########\n#\n########\n\n\n\n",
    "created" : 1410303413506.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3650346761",
    "id" : "A5E54B5B",
    "lastKnownWriteTime" : 1410303638,
    "path" : "~/shinyapps/aftercare/helper.R",
    "project_path" : "helper.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}